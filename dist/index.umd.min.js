(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["index"]=t(require("vue")):e["index"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(e=>(()=>{var t={417:function(e){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return l(e)||p(e)||c(e)||d()}function l(e){if(Array.isArray(e))return h(e)}function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u="undefined"!==typeof window&&"undefined"!==typeof window.document,f=u?window:{},m=!(!u||!f.document.documentElement)&&"ontouchstart"in f.document.documentElement,g=!!u&&"PointerEvent"in f,A="cropper",v="all",C="crop",b="move",w="zoom",y="e",x="w",B="s",M="n",E="ne",F="nw",O="se",D="sw",k="".concat(A,"-crop"),S="".concat(A,"-disabled"),T="".concat(A,"-hidden"),U="".concat(A,"-hide"),N="".concat(A,"-invisible"),R="".concat(A,"-modal"),L="".concat(A,"-move"),I="".concat(A,"Action"),P="".concat(A,"Preview"),W="crop",j="move",V="none",H="crop",z="cropend",q="cropmove",X="cropstart",Y="dblclick",G=m?"touchstart":"mousedown",_=m?"touchmove":"mousemove",Z=m?"touchend touchcancel":"mouseup",Q=g?"pointerdown":G,J=g?"pointermove":_,K=g?"pointerup pointercancel":Z,$="ready",ee="resize",te="wheel",ne="zoom",re="image/jpeg",oe=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ie=/^data:/,ae=/^data:image\/jpeg;base64,/,se=/^img|canvas$/i,le=200,pe=100,ce={viewMode:0,dragMode:W,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:pe,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},he='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',de=Number.isNaN||f.isNaN;function ue(e){return"number"===typeof e&&!de(e)}var fe=function(e){return e>0&&e<1/0};function me(e){return"undefined"===typeof e}function ge(e){return"object"===n(e)&&null!==e}var Ae=Object.prototype.hasOwnProperty;function ve(e){if(!ge(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&Ae.call(n,"isPrototypeOf")}catch(r){return!1}}function Ce(e){return"function"===typeof e}var be=Array.prototype.slice;function we(e){return Array.from?Array.from(e):be.call(e)}function ye(e,t){return e&&Ce(t)&&(Array.isArray(e)||ue(e.length)?we(e).forEach((function(n,r){t.call(e,n,r,e)})):ge(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var xe=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ge(e)&&n.length>0&&n.forEach((function(t){ge(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},Be=/\.\d*(?:0|9){12}\d*$/;function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Be.test(e)?Math.round(e*t)/t:e}var Ee=/^width|height|left|top|marginLeft|marginTop$/;function Fe(e,t){var n=e.style;ye(t,(function(e,t){Ee.test(t)&&ue(e)&&(e="".concat(e,"px")),n[t]=e}))}function Oe(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function De(e,t){if(t)if(ue(e.length))ye(e,(function(e){De(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function ke(e,t){t&&(ue(e.length)?ye(e,(function(e){ke(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Se(e,t,n){t&&(ue(e.length)?ye(e,(function(e){Se(e,t,n)})):n?De(e,t):ke(e,t))}var Te=/([a-z\d])([A-Z])/g;function Ue(e){return e.replace(Te,"$1-$2").toLowerCase()}function Ne(e,t){return ge(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Ue(t)))}function Re(e,t,n){ge(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(Ue(t)),n)}function Le(e,t){if(ge(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Ue(t)))}var Ie=/\s\s*/,Pe=function(){var e=!1;if(u){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});f.addEventListener("test",n,r),f.removeEventListener("test",n,r)}return e}();function We(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Ie).forEach((function(t){if(!Pe){var i=e.listeners;i&&i[t]&&i[t][n]&&(o=i[t][n],delete i[t][n],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners)}e.removeEventListener(t,o,r)}))}function je(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Ie).forEach((function(t){if(r.once&&!Pe){var i=e.listeners,a=void 0===i?{}:i;o=function(){delete a[t][n],e.removeEventListener(t,o,r);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];n.apply(e,s)},a[t]||(a[t]={}),a[t][n]&&e.removeEventListener(t,a[t][n],r),a[t][n]=o,e.listeners=a}e.addEventListener(t,o,r)}))}function Ve(e,t,n){var r;return Ce(Event)&&Ce(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(r)}function He(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var ze=f.location,qe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Xe(e){var t=e.match(qe);return null!==t&&(t[1]!==ze.protocol||t[2]!==ze.hostname||t[3]!==ze.port)}function Ye(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ge(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,o=e.translateX,i=e.translateY,a=[];ue(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),ue(i)&&0!==i&&a.push("translateY(".concat(i,"px)")),ue(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),ue(n)&&1!==n&&a.push("scaleX(".concat(n,")")),ue(r)&&1!==r&&a.push("scaleY(".concat(r,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function _e(e){var n=t({},e),r=0;return ye(e,(function(e,t){delete n[t],ye(n,(function(t){var n=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+o*o),l=Math.sqrt(i*i+a*a),p=(l-s)/s;Math.abs(p)>Math.abs(r)&&(r=p)}))})),r}function Ze(e,n){var r=e.pageX,o=e.pageY,i={endX:r,endY:o};return n?i:t({startX:r,startY:o},i)}function Qe(e){var t=0,n=0,r=0;return ye(e,(function(e){var o=e.startX,i=e.startY;t+=o,n+=i,r+=1})),t/=r,n/=r,{pageX:t,pageY:n}}function Je(e){var t=e.aspectRatio,n=e.height,r=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=fe(r),a=fe(n);if(i&&a){var s=n*t;"contain"===o&&s>r||"cover"===o&&s<r?n=r/t:r=n*t}else i?n=r/t:a&&(r=n*t);return{width:r,height:n}}function Ke(e){var t=e.width,n=e.height,r=e.degree;if(r=Math.abs(r)%180,90===r)return{width:n,height:t};var o=r%90*Math.PI/180,i=Math.sin(o),a=Math.cos(o),s=t*a+n*i,l=t*i+n*a;return r>90?{width:l,height:s}:{width:s,height:l}}function $e(e,t,n,r){var o=t.aspectRatio,i=t.naturalWidth,a=t.naturalHeight,l=t.rotate,p=void 0===l?0:l,c=t.scaleX,h=void 0===c?1:c,d=t.scaleY,u=void 0===d?1:d,f=n.aspectRatio,m=n.naturalWidth,g=n.naturalHeight,A=r.fillColor,v=void 0===A?"transparent":A,C=r.imageSmoothingEnabled,b=void 0===C||C,w=r.imageSmoothingQuality,y=void 0===w?"low":w,x=r.maxWidth,B=void 0===x?1/0:x,M=r.maxHeight,E=void 0===M?1/0:M,F=r.minWidth,O=void 0===F?0:F,D=r.minHeight,k=void 0===D?0:D,S=document.createElement("canvas"),T=S.getContext("2d"),U=Je({aspectRatio:f,width:B,height:E}),N=Je({aspectRatio:f,width:O,height:k},"cover"),R=Math.min(U.width,Math.max(N.width,m)),L=Math.min(U.height,Math.max(N.height,g)),I=Je({aspectRatio:o,width:B,height:E}),P=Je({aspectRatio:o,width:O,height:k},"cover"),W=Math.min(I.width,Math.max(P.width,i)),j=Math.min(I.height,Math.max(P.height,a)),V=[-W/2,-j/2,W,j];return S.width=Me(R),S.height=Me(L),T.fillStyle=v,T.fillRect(0,0,R,L),T.save(),T.translate(R/2,L/2),T.rotate(p*Math.PI/180),T.scale(h,u),T.imageSmoothingEnabled=b,T.imageSmoothingQuality=y,T.drawImage.apply(T,[e].concat(s(V.map((function(e){return Math.floor(Me(e))}))))),T.restore(),S}var et=String.fromCharCode;function tt(e,t,n){var r="";n+=t;for(var o=t;o<n;o+=1)r+=et(e.getUint8(o));return r}var nt=/^data:.*,/;function rt(e){var t=e.replace(nt,""),n=atob(t),r=new ArrayBuffer(n.length),o=new Uint8Array(r);return ye(o,(function(e,t){o[t]=n.charCodeAt(t)})),r}function ot(e,t){var n=[],r=8192,o=new Uint8Array(e);while(o.length>0)n.push(et.apply(null,we(o.subarray(0,r)))),o=o.subarray(r);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function it(e){var t,n=new DataView(e);try{var r,o,i;if(255===n.getUint8(0)&&216===n.getUint8(1)){var a=n.byteLength,s=2;while(s+1<a){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){o=s;break}s+=1}}if(o){var l=o+4,p=o+10;if("Exif"===tt(n,l,4)){var c=n.getUint16(p);if(r=18761===c,(r||19789===c)&&42===n.getUint16(p+2,r)){var h=n.getUint32(p+4,r);h>=8&&(i=p+h)}}}if(i){var d,u,f=n.getUint16(i,r);for(u=0;u<f;u+=1)if(d=i+12*u+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(m){t=1}return t}function at(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:n,scaleY:r}}var st={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),i=Number(t.minContainerHeight);De(r,T),ke(e,T);var a={width:Math.max(n.offsetWidth,o>=0?o:le),height:Math.max(n.offsetHeight,i>=0?i:pe)};this.containerData=a,Fe(r,{width:a.width,height:a.height}),De(e,T),ke(r,T)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180===90,o=r?t.naturalHeight:t.naturalWidth,i=r?t.naturalWidth:t.naturalHeight,a=o/i,s=e.width,l=e.height;e.height*a>e.width?3===n?s=e.height*a:l=e.width/a:3===n?l=e.width/a:s=e.height*a;var p={aspectRatio:a,naturalWidth:o,naturalHeight:i,width:s,height:l};this.canvasData=p,this.limited=1===n||2===n,this.limitCanvas(!0,!0),p.width=Math.min(Math.max(p.width,p.minWidth),p.maxWidth),p.height=Math.min(Math.max(p.height,p.minHeight),p.maxHeight),p.left=(e.width-p.width)/2,p.top=(e.height-p.height)/2,p.oldLeft=p.left,p.oldTop=p.top,this.initialCanvasData=xe({},p)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=n.viewMode,s=o.aspectRatio,l=this.cropped&&i;if(e){var p=Number(n.minCanvasWidth)||0,c=Number(n.minCanvasHeight)||0;a>1?(p=Math.max(p,r.width),c=Math.max(c,r.height),3===a&&(c*s>p?p=c*s:c=p/s)):a>0&&(p?p=Math.max(p,l?i.width:0):c?c=Math.max(c,l?i.height:0):l&&(p=i.width,c=i.height,c*s>p?p=c*s:c=p/s));var h=Je({aspectRatio:s,width:p,height:c});p=h.width,c=h.height,o.minWidth=p,o.minHeight=c,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(a>(l?0:1)){var d=r.width-o.width,u=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,u),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,u),l&&this.limited&&(o.minLeft=Math.min(i.left,i.left+(i.width-o.width)),o.minTop=Math.min(i.top,i.top+(i.height-o.height)),o.maxLeft=i.left,o.maxTop=i.top,2===a&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,u),o.maxTop=Math.max(0,u))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=Ke({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),i=o.width,a=o.height,s=n.width*(i/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=i/a,n.naturalWidth=i,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Fe(this.canvas,xe({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);xe(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),Fe(this.image,xe({width:n.width,height:n.height},Ge(xe({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=xe({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,p=Number(n.minCropBoxHeight)||0,c=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,h=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;l=Math.min(l,r.width),p=Math.min(p,r.height),s&&(l&&p?p*s>l?p=l/s:l=p*s:l?p=l/s:p&&(l=p*s),h*s>c?h=c/s:c=h*s),i.minWidth=Math.min(l,c),i.minHeight=Math.min(p,h),i.maxWidth=c,i.maxHeight=h}t&&(a?(i.minLeft=Math.max(0,o.left),i.minTop=Math.max(0,o.top),i.maxLeft=Math.min(r.width,o.left+o.width)-i.width,i.maxTop=Math.min(r.height,o.top+o.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=r.width-i.width,i.maxTop=r.height-i.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Re(this.face,I,n.width>=t.width&&n.height>=t.height?b:v),Fe(this.cropBox,xe({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ve(this.element,H,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=r,i.alt=o,this.viewBox.appendChild(i),this.viewBoxImage=i,n){var a=n;"string"===typeof n?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,ye(a,(function(e){var n=document.createElement("img");Re(e,P,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){ye(this.previews,(function(e){var t=Ne(e,P);Fe(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Le(e,P)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,i=e.width,a=e.height,s=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(Fe(this.viewBoxImage,xe({width:i,height:a},Ge(xe({translateX:-s,translateY:-l},e)))),ye(this.previews,(function(t){var n=Ne(t,P),p=n.width,c=n.height,h=p,d=c,u=1;r&&(u=p/r,d=o*u),o&&d>c&&(u=c/o,h=r*u,d=c),Fe(t,{width:h,height:d}),Fe(t.getElementsByTagName("img")[0],xe({width:i*u,height:a*u},Ge(xe({translateX:-s*u,translateY:-l*u},e))))})))}},pt={bind:function(){var e=this.element,t=this.options,n=this.cropper;Ce(t.cropstart)&&je(e,X,t.cropstart),Ce(t.cropmove)&&je(e,q,t.cropmove),Ce(t.cropend)&&je(e,z,t.cropend),Ce(t.crop)&&je(e,H,t.crop),Ce(t.zoom)&&je(e,ne,t.zoom),je(n,Q,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&je(n,te,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&je(n,Y,this.onDblclick=this.dblclick.bind(this)),je(e.ownerDocument,J,this.onCropMove=this.cropMove.bind(this)),je(e.ownerDocument,K,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&je(window,ee,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;Ce(t.cropstart)&&We(e,X,t.cropstart),Ce(t.cropmove)&&We(e,q,t.cropmove),Ce(t.cropend)&&We(e,z,t.cropend),Ce(t.crop)&&We(e,H,t.crop),Ce(t.zoom)&&We(e,ne,t.zoom),We(n,Q,this.onCropStart),t.zoomable&&t.zoomOnWheel&&We(n,te,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&We(n,Y,this.onDblclick),We(e.ownerDocument,J,this.onCropMove),We(e.ownerDocument,K,this.onCropEnd),t.responsive&&We(window,ee,this.onResize)}},ct={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,o=this.containerData,i=r.offsetWidth/o.width,a=r.offsetHeight/o.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;if(1!==s)n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(ye(e,(function(t,n){e[n]=t*s}))),this.setCropBoxData(ye(t,(function(e,n){t[n]=e*s}))))}},dblclick:function(){this.disabled||this.options.dragMode===V||this.setDragMode(Oe(this.dragBox,k)?j:W)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ue(t)&&1!==t||ue(n)&&0!==n||e.ctrlKey))){var r,o=this.options,i=this.pointers;e.changedTouches?ye(e.changedTouches,(function(e){i[e.identifier]=Ze(e)})):i[e.pointerId||0]=Ze(e),r=Object.keys(i).length>1&&o.zoomable&&o.zoomOnTouch?w:Ne(e.target,I),oe.test(r)&&!1!==Ve(this.element,X,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===C&&(this.cropping=!0,De(this.dragBox,R)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ve(this.element,q,{originalEvent:e,action:t})&&(e.changedTouches?ye(e.changedTouches,(function(e){xe(n[e.identifier]||{},Ze(e,!0))})):xe(n[e.pointerId||0]||{},Ze(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?ye(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Se(this.dragBox,R,this.cropped&&this.options.modal)),Ve(this.element,z,{originalEvent:e,action:t}))}}},ht={change:function(e){var t,n=this.options,r=this.canvasData,o=this.containerData,i=this.cropBoxData,a=this.pointers,s=this.action,l=n.aspectRatio,p=i.left,c=i.top,h=i.width,d=i.height,u=p+h,f=c+d,m=0,g=0,A=o.width,k=o.height,S=!0;!l&&e.shiftKey&&(l=h&&d?h/d:1),this.limited&&(m=i.minLeft,g=i.minTop,A=m+Math.min(o.width,r.width,r.left+r.width),k=g+Math.min(o.height,r.height,r.top+r.height));var U=a[Object.keys(a)[0]],N={x:U.endX-U.startX,y:U.endY-U.startY},R=function(e){switch(e){case y:u+N.x>A&&(N.x=A-u);break;case x:p+N.x<m&&(N.x=m-p);break;case M:c+N.y<g&&(N.y=g-c);break;case B:f+N.y>k&&(N.y=k-f);break}};switch(s){case v:p+=N.x,c+=N.y;break;case y:if(N.x>=0&&(u>=A||l&&(c<=g||f>=k))){S=!1;break}R(y),h+=N.x,h<0&&(s=x,h=-h,p-=h),l&&(d=h/l,c+=(i.height-d)/2);break;case M:if(N.y<=0&&(c<=g||l&&(p<=m||u>=A))){S=!1;break}R(M),d-=N.y,c+=N.y,d<0&&(s=B,d=-d,c-=d),l&&(h=d*l,p+=(i.width-h)/2);break;case x:if(N.x<=0&&(p<=m||l&&(c<=g||f>=k))){S=!1;break}R(x),h-=N.x,p+=N.x,h<0&&(s=y,h=-h,p-=h),l&&(d=h/l,c+=(i.height-d)/2);break;case B:if(N.y>=0&&(f>=k||l&&(p<=m||u>=A))){S=!1;break}R(B),d+=N.y,d<0&&(s=M,d=-d,c-=d),l&&(h=d*l,p+=(i.width-h)/2);break;case E:if(l){if(N.y<=0&&(c<=g||u>=A)){S=!1;break}R(M),d-=N.y,c+=N.y,h=d*l}else R(M),R(y),N.x>=0?u<A?h+=N.x:N.y<=0&&c<=g&&(S=!1):h+=N.x,N.y<=0?c>g&&(d-=N.y,c+=N.y):(d-=N.y,c+=N.y);h<0&&d<0?(s=D,d=-d,h=-h,c-=d,p-=h):h<0?(s=F,h=-h,p-=h):d<0&&(s=O,d=-d,c-=d);break;case F:if(l){if(N.y<=0&&(c<=g||p<=m)){S=!1;break}R(M),d-=N.y,c+=N.y,h=d*l,p+=i.width-h}else R(M),R(x),N.x<=0?p>m?(h-=N.x,p+=N.x):N.y<=0&&c<=g&&(S=!1):(h-=N.x,p+=N.x),N.y<=0?c>g&&(d-=N.y,c+=N.y):(d-=N.y,c+=N.y);h<0&&d<0?(s=O,d=-d,h=-h,c-=d,p-=h):h<0?(s=E,h=-h,p-=h):d<0&&(s=D,d=-d,c-=d);break;case D:if(l){if(N.x<=0&&(p<=m||f>=k)){S=!1;break}R(x),h-=N.x,p+=N.x,d=h/l}else R(B),R(x),N.x<=0?p>m?(h-=N.x,p+=N.x):N.y>=0&&f>=k&&(S=!1):(h-=N.x,p+=N.x),N.y>=0?f<k&&(d+=N.y):d+=N.y;h<0&&d<0?(s=E,d=-d,h=-h,c-=d,p-=h):h<0?(s=O,h=-h,p-=h):d<0&&(s=F,d=-d,c-=d);break;case O:if(l){if(N.x>=0&&(u>=A||f>=k)){S=!1;break}R(y),h+=N.x,d=h/l}else R(B),R(y),N.x>=0?u<A?h+=N.x:N.y>=0&&f>=k&&(S=!1):h+=N.x,N.y>=0?f<k&&(d+=N.y):d+=N.y;h<0&&d<0?(s=F,d=-d,h=-h,c-=d,p-=h):h<0?(s=D,h=-h,p-=h):d<0&&(s=E,d=-d,c-=d);break;case b:this.move(N.x,N.y),S=!1;break;case w:this.zoom(_e(a),e),S=!1;break;case C:if(!N.x||!N.y){S=!1;break}t=He(this.cropper),p=U.startX-t.left,c=U.startY-t.top,h=i.minWidth,d=i.minHeight,N.x>0?s=N.y>0?O:E:N.x<0&&(p-=h,s=N.y>0?D:F),N.y<0&&(c-=d),this.cropped||(ke(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}S&&(i.width=h,i.height=d,i.left=p,i.top=c,this.action=s,this.renderCropBox()),ye(a,(function(e){e.startX=e.endX,e.startY=e.endY}))}},dt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&De(this.dragBox,R),ke(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=xe({},this.initialImageData),this.canvasData=xe({},this.initialCanvasData),this.cropBoxData=xe({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(xe(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ke(this.dragBox,R),De(this.cropBox,T)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ye(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ke(this.cropper,S)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,De(this.cropper,S)),this},destroy:function(){var e=this.element;return e[A]?(e[A]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(me(e)?e:r+Number(e),me(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(ue(e)&&(n.left=e,r=!0),ue(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e=e<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,i=o.width,a=o.height,s=o.naturalWidth,l=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var p=s*e,c=l*e;if(!1===Ve(this.element,ne,{ratio:e,oldRatio:i/s,originalEvent:n}))return this;if(n){var h=this.pointers,d=He(this.cropper),u=h&&Object.keys(h).length?Qe(h):{pageX:n.pageX,pageY:n.pageY};o.left-=(p-i)*((u.pageX-d.left-o.left)/i),o.top-=(c-a)*((u.pageY-d.top-o.top)/a)}else ve(t)&&ue(t.x)&&ue(t.y)?(o.left-=(p-i)*((t.x-o.left)/i),o.top-=(c-a)*((t.y-o.top)/a)):(o.left-=(p-i)/2,o.top-=(c-a)/2);o.width=p,o.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),ue(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,ue(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(ue(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(ue(e)&&(n.scaleX=e,r=!0),ue(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,o=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){e={x:i.left-o.left,y:i.top-o.top,width:i.width,height:i.height};var a=r.width/r.naturalWidth;if(ye(e,(function(t,n){e[n]=t/a})),t){var s=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&ve(e)){var i=!1;t.rotatable&&ue(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,i=!0),t.scalable&&(ue(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,i=!0),ue(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;ue(e.x)&&(o.left=e.x*a+r.left),ue(e.y)&&(o.top=e.y*a+r.top),ue(e.width)&&(o.width=e.width*a),ue(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?xe({},this.containerData):{}},getImageData:function(){return this.sized?xe({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&ye(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ve(e)&&(ue(e.left)&&(t.left=e.left),ue(e.top)&&(t.top=e.top),ue(e.width)?(t.width=e.width,t.height=e.width/n):ue(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ve(e)&&(ue(e.left)&&(r.left=e.left),ue(e.top)&&(r.top=e.top),ue(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),ue(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=$e(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),o=r.x,i=r.y,a=r.width,l=r.height,p=n.width/Math.floor(t.naturalWidth);1!==p&&(o*=p,i*=p,a*=p,l*=p);var c=a/l,h=Je({aspectRatio:c,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=Je({aspectRatio:c,width:e.minWidth||0,height:e.minHeight||0},"cover"),u=Je({aspectRatio:c,width:e.width||(1!==p?n.width:a),height:e.height||(1!==p?n.height:l)}),f=u.width,m=u.height;f=Math.min(h.width,Math.max(d.width,f)),m=Math.min(h.height,Math.max(d.height,m));var g=document.createElement("canvas"),A=g.getContext("2d");g.width=Me(f),g.height=Me(m),A.fillStyle=e.fillColor||"transparent",A.fillRect(0,0,f,m);var v=e.imageSmoothingEnabled,C=void 0===v||v,b=e.imageSmoothingQuality;A.imageSmoothingEnabled=C,b&&(A.imageSmoothingQuality=b);var w,y,x,B,M,E,F=n.width,O=n.height,D=o,k=i;D<=-a||D>F?(D=0,w=0,x=0,M=0):D<=0?(x=-D,D=0,w=Math.min(F,a+D),M=w):D<=F&&(x=0,w=Math.min(a,F-D),M=w),w<=0||k<=-l||k>O?(k=0,y=0,B=0,E=0):k<=0?(B=-k,k=0,y=Math.min(O,l+k),E=y):k<=O&&(B=0,y=Math.min(l,O-k),E=y);var S=[D,k,w,y];if(M>0&&E>0){var T=f/a;S.push(x*T,B*T,M*T,E*T)}return A.drawImage.apply(A,[n].concat(s(S.map((function(e){return Math.floor(Me(e))}))))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||me(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===W,i=t.movable&&e===j;e=o||i?e:V,t.dragMode=e,Re(n,I,e),Se(n,k,o),Se(n,L,i),t.cropBoxMovable||(Re(r,I,e),Se(r,k,o),Se(r,L,i))}return this}},ut=f.Cropper,ft=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t||!se.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=xe({},ce,ve(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return i(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[A]){if(t[A]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(ie.test(e))ae.test(e)?this.read(rt(e)):this.clone();else{var o=new XMLHttpRequest,i=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=i,o.onerror=i,o.ontimeout=i,o.onprogress=function(){o.getResponseHeader("content-type")!==re&&o.abort()},o.onload=function(){t.read(o.response)},o.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&Xe(e)&&n.crossOrigin&&(e=Ye(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===n.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=it(e),o=0,i=1,a=1;if(r>1){this.url=ot(e,re);var s=at(r);o=s.rotate,i=s.scaleX,a=s.scaleY}t.rotatable&&(n.rotate=o),t.scalable&&(n.scaleX=i,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&Xe(t)&&(n||(n="anonymous"),r=Ye(t)),this.crossOrigin=n,this.crossOriginUrl=r;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=r||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),De(o,U),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=f.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(f.navigator.userAgent),r=function(t,n){xe(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=xe({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var o=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),n||i.removeChild(o)},o.src=t.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(o))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,o=document.createElement("div");o.innerHTML=he;var i=o.querySelector(".".concat(A,"-container")),a=i.querySelector(".".concat(A,"-canvas")),s=i.querySelector(".".concat(A,"-drag-box")),l=i.querySelector(".".concat(A,"-crop-box")),p=l.querySelector(".".concat(A,"-face"));this.container=r,this.cropper=i,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=i.querySelector(".".concat(A,"-view-box")),this.face=p,a.appendChild(n),De(e,T),r.insertBefore(i,e.nextSibling),this.isImg||ke(n,U),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,De(l,T),t.guides||De(l.getElementsByClassName("".concat(A,"-dashed")),T),t.center||De(l.getElementsByClassName("".concat(A,"-center")),T),t.background&&De(i,"".concat(A,"-bg")),t.highlight||De(p,N),t.cropBoxMovable&&(De(p,L),Re(p,I,v)),t.cropBoxResizable||(De(l.getElementsByClassName("".concat(A,"-line")),T),De(l.getElementsByClassName("".concat(A,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),Ce(t.ready)&&je(e,$,t.ready,{once:!0}),Ve(e,$)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ke(this.element,T))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ut,e}},{key:"setDefaults",value:function(e){xe(ce,ve(e)&&e)}}]),e}();return xe(ft.prototype,st,lt,pt,ct,ht,dt),ft}))},383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(478),o=n.n(r),i=n(185),a=n.n(i),s=a()(o());s.push([e.id,".uploader-cropper-dialog .el-dialog__body{padding:0}","",{version:3,sources:["webpack://./../../uploader.vue"],names:[],mappings:"AAofA,0CACE,SACF",sourcesContent:['<template>\r\n  <el-upload\r\n    ref="myupload"\r\n    v-bind="$attrs"\r\n    action\r\n    :fileList="fileListFinnal"\r\n    :accept="acceptFinnal"\r\n    :before-upload="handleBeforeUpload"\r\n    :on-exceed="handleonExceed"\r\n    :on-change="handleChange"\r\n    :on-remove="handleRemove"\r\n    :http-request="customUpload"\r\n  >\r\n    <slot name="default">\r\n      <el-button>点击上传</el-button>\r\n    </slot>\r\n    <template #tip>\r\n      <slot name="tip"></slot>\r\n    </template>\r\n\r\n    \x3c!-- edit dialog --\x3e\r\n    <el-dialog\r\n      v-model="dialogVisible"\r\n      append-to-body\r\n      title="图像剪裁"\r\n      top="10vh"\r\n      custom-class="uploader-cropper-dialog"\r\n      :close-on-click-modal="false"\r\n      :close-on-press-escape="false"\r\n      :show-close="false"\r\n      @close="cropperMethod(\'close\')"\r\n    >\r\n      <div class="cropper_main">\r\n        <img src ref="CropperImg" />\r\n      </div>\r\n      <div class="cropper_actions flex-row align-center">\r\n        <div class="flex-1">\r\n          <el-button-group>\r\n            <el-button title="左旋" @click="cropperMethod(\'rotateLeft\')">\r\n              <el-icon><refresh-left /></el-icon>\r\n              左旋\r\n            </el-button>\r\n            <el-button title="右旋" @click="cropperMethod(\'rotateRight\')">\r\n              <el-icon><refresh-right /></el-icon>\r\n              右旋\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button title="水平镜像" @click="cropperMethod(\'scaleX\')">\r\n              <el-icon style="transform: rotateZ(90deg)"><sort /></el-icon>\r\n              水平镜像\r\n            </el-button>\r\n            <el-button title="垂直镜像" @click="cropperMethod(\'scaleY\')">\r\n              <el-icon><sort /></el-icon>\r\n              垂直镜像\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button title="重置" @click="cropperMethod(\'reset\')">\r\n              <el-icon><refresh /></el-icon>\r\n              重置\r\n            </el-button>\r\n          </el-button-group>\r\n        </div>\r\n\r\n        <el-button type="primary" plain @click="cropperMethod(\'save\')">\r\n          <el-icon><crop /></el-icon>\r\n          确定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-upload>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, inject, useAttrs, onMounted } from "vue";\r\nimport { fixImgFile } from "ios-photo-repair";\r\nimport Cropper from "cropperjs";\r\nimport "cropperjs/dist/cropper.css";\r\nimport {\r\n  Crop,\r\n  Refresh,\r\n  Sort,\r\n  RefreshRight,\r\n  RefreshLeft,\r\n} from "@element-plus/icons-vue";\r\n\r\nlet cropperInstance;\r\n// 调试开关\r\nconst DEBUG = process.env.NODE_ENV === "development";\r\n\r\n// 图片压缩成jpg格式\r\nconst fixJpgFileName = function (fileName) {\r\n  if (fileName.match(/\\.jpg|\\.jpeg$/)) {\r\n    return fileName;\r\n  }\r\n  return fileName + ".jpg";\r\n};\r\n\r\n// 文件类型集合\r\nimport FileTypeMap from "../assets/FileTypeMap.js";\r\n\r\nconst props = defineProps({\r\n  accept: {\r\n    type: String,\r\n    default: "*",\r\n  },\r\n  modelValue: {\r\n    type: Array,\r\n    required: false,\r\n    default() {\r\n      return [];\r\n    },\r\n  },\r\n  limitSize: {\r\n    // 文件尺寸限制\r\n    type: Number,\r\n    required: false,\r\n    default() {\r\n      return 100 * 1024 * 1024;\r\n    },\r\n  },\r\n  imgCompress: {\r\n    // 开启图片压缩\r\n    type: Boolean,\r\n    required: false,\r\n    default() {\r\n      return true;\r\n    },\r\n  },\r\n  imgCompressOption: {\r\n    // 图片压缩配置\r\n    type: Object,\r\n    required: false,\r\n    default() {\r\n      return {\r\n        maxWidth: 1000,\r\n        maxHeight: 1000,\r\n      };\r\n    },\r\n  },\r\n  imgCrop: {\r\n    // 开启图片剪裁\r\n    type: Boolean,\r\n    required: false,\r\n    default() {\r\n      return false;\r\n    },\r\n  },\r\n  imgCropOption: {\r\n    // 图片剪裁配置\r\n    type: Object,\r\n    required: false,\r\n    default() {\r\n      return {\r\n        ratio: 1,\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n        maxWidth: 1000,\r\n        maxHeight: 1000,\r\n      };\r\n    },\r\n  },\r\n  uploadMethod: {\r\n    // 自定义上传方法，参数（file/blob, fileName）\r\n    type: Function,\r\n    required: false,\r\n  },\r\n  responseTransfer: {\r\n    // 接口返回数据 与 fileList 数据格式转换函数\r\n    type: Function,\r\n    required: false,\r\n    default(response) {\r\n      return response;\r\n    },\r\n  },\r\n  BeforeUploadError: {\r\n    // 上传前校验失败回调\r\n    type: Function,\r\n    required: false,\r\n    default(info) {\r\n      return console.warn(info);\r\n    },\r\n  },\r\n});\r\n\r\n// 事件\r\nconst emits = defineEmits(["update:modelValue"]);\r\n\r\n// 插件全局配置\r\nconst globalOption = inject("$UploaderOption");\r\n// 最终配置\r\nconst propsFinnal = computed(() => {\r\n  const globalOptionKeys = Object.keys(globalOption);\r\n\r\n  let result = {};\r\n  Object.keys(props).forEach((prop) => {\r\n    result[prop] =\r\n      globalOptionKeys.indexOf(prop) === -1 ? props[prop] : globalOption[prop];\r\n  });\r\n  return result;\r\n});\r\n// 上传组件ref\r\nconst myupload = ref(null);\r\n\r\nconst getExtByType = (type) => {\r\n  const quickType = Object.assign(\r\n    {},\r\n    FileTypeMap,\r\n    globalOption.quickType || {}\r\n  );\r\n  if (type && Array.isArray(quickType[type])) {\r\n    let classList = [];\r\n    let extList = [];\r\n    quickType[type].forEach((e) => {\r\n      if (e.indexOf("t-") === 0) {\r\n        classList.push(e);\r\n      } else {\r\n        extList.push(e);\r\n      }\r\n    });\r\n    if (classList.length) {\r\n      classList.forEach((classType) => {\r\n        extList = extList.concat(getExtByType(classType));\r\n      });\r\n    }\r\n    return extList;\r\n  } else if (type && type.split) {\r\n    return [type.toLowerCase()];\r\n  }\r\n};\r\n\r\nconst acceptFinnal = computed(() => {\r\n  if (props.accept && props.accept.indexOf("t-") !== -1) {\r\n    const typeArray = props.accept.split(",");\r\n    let result = [];\r\n    typeArray.forEach((type) => {\r\n      result = result.concat(getExtByType(type));\r\n    });\r\n    return result.join(",");\r\n  } else {\r\n    return props.accept || "*";\r\n  }\r\n});\r\n// attrs\r\nconst attrs = useAttrs();\r\nconst fileListFinnal = computed(\r\n  () => {\r\n    return attrs.fileList || props.modelValue || [];\r\n  },\r\n  {\r\n    immediate: true,\r\n  }\r\n);\r\n// 组件变量\r\nlet dialogVisible = ref(false);\r\nlet cropResult = ref(null);\r\nlet controller = ref(null);\r\n\r\n// 方法\r\nconst handleBeforeUpload = function (file) {\r\n  // 尺寸校验\r\n  if (file.size > propsFinnal.value.limitSize) {\r\n    propsFinnal.value.BeforeUploadError({\r\n      message: "文件大小超出限制",\r\n      type: "warning",\r\n    });\r\n    return false;\r\n  }\r\n  // 格式校验\r\n  if (\r\n    acceptFinnal.value !== "*" &&\r\n    acceptFinnal.value.indexOf(\r\n      file.name.substring(file.name.lastIndexOf(".")).toLowerCase()\r\n    ) === -1\r\n  ) {\r\n    console.log(file.name.substring(file.name.lastIndexOf(".")).toLowerCase());\r\n    propsFinnal.value.BeforeUploadError({\r\n      message: "文件格式不正确",\r\n      type: "warning",\r\n    });\r\n    return false;\r\n  }\r\n\r\n  if (typeof attrs["before-upload"] === "function") {\r\n    return attrs["before-upload"](file);\r\n  } else if (globalOption && typeof globalOption.beforeUpload === "function") {\r\n    return globalOption.beforeUpload(file);\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\nconst handleonExceed = function (file, fileList) {\r\n  if (typeof attrs["on-exceed"] === "function") {\r\n    attrs["on-exceed"](file, fileList);\r\n  } else if (globalOption && typeof globalOption.onExceed === "function") {\r\n    globalOption.onExceed(file, fileList);\r\n  }\r\n};\r\n\r\nconst handleChange = function (file, fileList) {\r\n  const doneFiles = fileList.filter((e) => e.status === "success");\r\n  if (doneFiles.length === fileList.length) {\r\n    emits(\r\n      "update:modelValue",\r\n      doneFiles.map((e) => {\r\n        let data = e.response\r\n          ? propsFinnal.value.responseTransfer(e.response)\r\n          : e;\r\n        // 扩展字段\r\n        data.uid = e.uid;\r\n        data.status = e.status;\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  if (typeof attrs["on-change"] === "function") {\r\n    attrs["on-change"](file, fileList);\r\n  }\r\n};\r\nconst handleProgress = function (e) {\r\n  if (typeof attrs["on-progress"] === "function") {\r\n    if (e.total > 0) {\r\n      e.percent = (e.loaded / e.total) * 100;\r\n    }\r\n    attrs["on-progress"](e);\r\n  }\r\n};\r\nconst handleRemove = function (file, fileList) {\r\n  emits(\r\n    "update:modelValue",\r\n    fileList.map((e) => {\r\n      let data = e.response\r\n        ? propsFinnal.value.responseTransfer(e.response)\r\n        : e;\r\n      data.uid = e.uid;\r\n      return data;\r\n    })\r\n  );\r\n\r\n  if (typeof attrs["on-remove"] === "function") {\r\n    attrs["on-remove"](file, fileList);\r\n  }\r\n};\r\n\r\nconst cropperMethod = function (action) {\r\n  // 剪裁相关处理方法\r\n  switch (action) {\r\n    case "save":\r\n      cropperInstance\r\n        .getCroppedCanvas({\r\n          minWidth: propsFinnal.value.imgCropOption.minWidth,\r\n          minHeight: propsFinnal.value.imgCropOption.minHeight,\r\n          maxWidth: propsFinnal.value.imgCropOption.maxWidth || 1000,\r\n          maxHeight: propsFinnal.value.imgCropOption.maxHeight || 1000,\r\n          imageSmoothingQuality: "medium",\r\n        })\r\n        .toBlob((blob) => {\r\n          cropResult.value = blob;\r\n        }, "image/jpeg");\r\n      break;\r\n    case "close":\r\n      dialogVisible.value = false;\r\n      if (cropperInstance) {\r\n        cropperInstance.destroy();\r\n      }\r\n      if (!cropResult.value) {\r\n        const newValue = [].concat(props.modelValue);\r\n        newValue.pop();\r\n        emits("update:modelValue", newValue);\r\n      }\r\n      break;\r\n    case "rotateLeft":\r\n      cropperInstance.rotate(-90);\r\n      break;\r\n    case "rotateRight":\r\n      cropperInstance.rotate(90);\r\n      break;\r\n    case "scaleX":\r\n      cropperInstance.scaleX(-1);\r\n      break;\r\n    case "scaleY":\r\n      cropperInstance.scaleY(-1);\r\n      break;\r\n    case "reset":\r\n      cropperInstance.reset();\r\n      break;\r\n    default:\r\n      console.warn("cropperMethod 参数错误: ", action);\r\n  }\r\n};\r\nconst clearFiles = function () {\r\n  // el-upload 方法\r\n  myupload.value.clearFiles();\r\n};\r\nconst abort = function () {\r\n  controller.value.abort();\r\n};\r\nconst submit = function () {\r\n  // el-upload 方法\r\n  myupload.value.submit();\r\n};\r\n// 剪裁图片DOM\r\nconst CropperImg = ref(null);\r\n// 自定义上传逻辑\r\nconst customUpload = async (params) => {\r\n  if (\r\n    !globalOption &&\r\n    !globalOption.uploadMethod &&\r\n    !propsFinnal.value.uploadMethod\r\n  ) {\r\n    return console.warn(\r\n      "Uploader: The required configuration [uploadMethod] is missing!"\r\n    );\r\n  }\r\n\r\n  const theUploadRequest =\r\n    propsFinnal.value.uploadMethod || globalOption.uploadMethod;\r\n  if (typeof theUploadRequest !== "function") {\r\n    return console.warn("Uploader: [uploadMethod] must be a Function!");\r\n  }\r\n\r\n  const uploadedFileType = params.file.type;\r\n  DEBUG && console.log("uploadedFileType", uploadedFileType);\r\n\r\n  let formDataFileObj = params.file;\r\n  let formDataFileName = params.file.name;\r\n\r\n  if (uploadedFileType.indexOf("image/") === 0) {\r\n    if (propsFinnal.value.imgCrop) {\r\n      // 图片剪裁\r\n      cropResult.value = null;\r\n      dialogVisible.value = true;\r\n\r\n      const imgBlob = await new Promise((resolve) => {\r\n        let oReader = new FileReader();\r\n        oReader.onload = (e) => {\r\n          let base64 = e.target.result;\r\n          let img = CropperImg.value;\r\n          img.src = base64;\r\n          //\r\n          if (cropperInstance) {\r\n            cropperInstance.destroy();\r\n          }\r\n\r\n          cropperInstance = new Cropper(img, {\r\n            viewMode: 1,\r\n            dragMode: "none",\r\n            movable: false,\r\n            zoomOnTouch: false,\r\n            zoomOnWheel: false,\r\n            toggleDragModeOnDblclick: false,\r\n            aspectRatio: propsFinnal.value.imgCropOption.ratio,\r\n          });\r\n        };\r\n        oReader.readAsDataURL(params.file);\r\n\r\n        watch(cropResult, resolve);\r\n      });\r\n\r\n      if (imgBlob) {\r\n        DEBUG && console.log("imgCrop", imgBlob);\r\n        formDataFileObj = imgBlob;\r\n        formDataFileName = fixJpgFileName(formDataFileName);\r\n        cropperMethod("close");\r\n      }\r\n    } else if (propsFinnal.value.imgCompress) {\r\n      // 图片压缩\r\n      const imgBlob = await fixImgFile(\r\n        params.file,\r\n        Object.assign({}, propsFinnal.value.imgCompressOption, {\r\n          outType: "blob",\r\n        })\r\n      );\r\n\r\n      DEBUG && console.log("imgCompress", imgBlob);\r\n      formDataFileObj = imgBlob;\r\n      formDataFileName = fixJpgFileName(formDataFileName);\r\n    }\r\n  }\r\n\r\n  // 上传\r\n  DEBUG && console.log("upload params", formDataFileName, formDataFileObj);\r\n  controller.value = new AbortController();\r\n  return theUploadRequest(formDataFileObj, formDataFileName, {\r\n    onUploadProgress: handleProgress,\r\n    signal: controller.value.signal,\r\n  }).then((res) => {\r\n    return res.data;\r\n  });\r\n};\r\n\r\n// onMounted(() => {\r\n//   console.warn(CropperImg.value);\r\n// });\r\n<\/script>\r\n\r\n<style>\r\n.uploader-cropper-dialog .el-dialog__body {\r\n  padding: 0;\r\n}\r\n</style>\r\n<style scoped>\r\n/* 图片剪裁弹窗 */\r\n\r\n.cropper_main {\r\n  height: 50vh;\r\n  min-height: 500px;\r\n}\r\n\r\n.cropper_actions {\r\n  padding: 0.5em;\r\n}\r\n\r\n.cropper_actions :deep(.el-button-group) {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const l=s},195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(478),o=n.n(r),i=n(185),a=n.n(i),s=a()(o());s.push([e.id,".cropper_main[data-v-74be6fb6]{height:50vh;min-height:500px}.cropper_actions[data-v-74be6fb6]{padding:.5em}.cropper_actions[data-v-74be6fb6] .el-button-group{margin-right:10px}","",{version:3,sources:["webpack://./../../uploader.vue"],names:[],mappings:"AA2fA,+BACE,WAAY,CACZ,gBACF,CAEA,kCACE,YACF,CAEA,mDACE,iBACF",sourcesContent:['<template>\r\n  <el-upload\r\n    ref="myupload"\r\n    v-bind="$attrs"\r\n    action\r\n    :fileList="fileListFinnal"\r\n    :accept="acceptFinnal"\r\n    :before-upload="handleBeforeUpload"\r\n    :on-exceed="handleonExceed"\r\n    :on-change="handleChange"\r\n    :on-remove="handleRemove"\r\n    :http-request="customUpload"\r\n  >\r\n    <slot name="default">\r\n      <el-button>点击上传</el-button>\r\n    </slot>\r\n    <template #tip>\r\n      <slot name="tip"></slot>\r\n    </template>\r\n\r\n    \x3c!-- edit dialog --\x3e\r\n    <el-dialog\r\n      v-model="dialogVisible"\r\n      append-to-body\r\n      title="图像剪裁"\r\n      top="10vh"\r\n      custom-class="uploader-cropper-dialog"\r\n      :close-on-click-modal="false"\r\n      :close-on-press-escape="false"\r\n      :show-close="false"\r\n      @close="cropperMethod(\'close\')"\r\n    >\r\n      <div class="cropper_main">\r\n        <img src ref="CropperImg" />\r\n      </div>\r\n      <div class="cropper_actions flex-row align-center">\r\n        <div class="flex-1">\r\n          <el-button-group>\r\n            <el-button title="左旋" @click="cropperMethod(\'rotateLeft\')">\r\n              <el-icon><refresh-left /></el-icon>\r\n              左旋\r\n            </el-button>\r\n            <el-button title="右旋" @click="cropperMethod(\'rotateRight\')">\r\n              <el-icon><refresh-right /></el-icon>\r\n              右旋\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button title="水平镜像" @click="cropperMethod(\'scaleX\')">\r\n              <el-icon style="transform: rotateZ(90deg)"><sort /></el-icon>\r\n              水平镜像\r\n            </el-button>\r\n            <el-button title="垂直镜像" @click="cropperMethod(\'scaleY\')">\r\n              <el-icon><sort /></el-icon>\r\n              垂直镜像\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button title="重置" @click="cropperMethod(\'reset\')">\r\n              <el-icon><refresh /></el-icon>\r\n              重置\r\n            </el-button>\r\n          </el-button-group>\r\n        </div>\r\n\r\n        <el-button type="primary" plain @click="cropperMethod(\'save\')">\r\n          <el-icon><crop /></el-icon>\r\n          确定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-upload>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, inject, useAttrs, onMounted } from "vue";\r\nimport { fixImgFile } from "ios-photo-repair";\r\nimport Cropper from "cropperjs";\r\nimport "cropperjs/dist/cropper.css";\r\nimport {\r\n  Crop,\r\n  Refresh,\r\n  Sort,\r\n  RefreshRight,\r\n  RefreshLeft,\r\n} from "@element-plus/icons-vue";\r\n\r\nlet cropperInstance;\r\n// 调试开关\r\nconst DEBUG = process.env.NODE_ENV === "development";\r\n\r\n// 图片压缩成jpg格式\r\nconst fixJpgFileName = function (fileName) {\r\n  if (fileName.match(/\\.jpg|\\.jpeg$/)) {\r\n    return fileName;\r\n  }\r\n  return fileName + ".jpg";\r\n};\r\n\r\n// 文件类型集合\r\nimport FileTypeMap from "../assets/FileTypeMap.js";\r\n\r\nconst props = defineProps({\r\n  accept: {\r\n    type: String,\r\n    default: "*",\r\n  },\r\n  modelValue: {\r\n    type: Array,\r\n    required: false,\r\n    default() {\r\n      return [];\r\n    },\r\n  },\r\n  limitSize: {\r\n    // 文件尺寸限制\r\n    type: Number,\r\n    required: false,\r\n    default() {\r\n      return 100 * 1024 * 1024;\r\n    },\r\n  },\r\n  imgCompress: {\r\n    // 开启图片压缩\r\n    type: Boolean,\r\n    required: false,\r\n    default() {\r\n      return true;\r\n    },\r\n  },\r\n  imgCompressOption: {\r\n    // 图片压缩配置\r\n    type: Object,\r\n    required: false,\r\n    default() {\r\n      return {\r\n        maxWidth: 1000,\r\n        maxHeight: 1000,\r\n      };\r\n    },\r\n  },\r\n  imgCrop: {\r\n    // 开启图片剪裁\r\n    type: Boolean,\r\n    required: false,\r\n    default() {\r\n      return false;\r\n    },\r\n  },\r\n  imgCropOption: {\r\n    // 图片剪裁配置\r\n    type: Object,\r\n    required: false,\r\n    default() {\r\n      return {\r\n        ratio: 1,\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n        maxWidth: 1000,\r\n        maxHeight: 1000,\r\n      };\r\n    },\r\n  },\r\n  uploadMethod: {\r\n    // 自定义上传方法，参数（file/blob, fileName）\r\n    type: Function,\r\n    required: false,\r\n  },\r\n  responseTransfer: {\r\n    // 接口返回数据 与 fileList 数据格式转换函数\r\n    type: Function,\r\n    required: false,\r\n    default(response) {\r\n      return response;\r\n    },\r\n  },\r\n  BeforeUploadError: {\r\n    // 上传前校验失败回调\r\n    type: Function,\r\n    required: false,\r\n    default(info) {\r\n      return console.warn(info);\r\n    },\r\n  },\r\n});\r\n\r\n// 事件\r\nconst emits = defineEmits(["update:modelValue"]);\r\n\r\n// 插件全局配置\r\nconst globalOption = inject("$UploaderOption");\r\n// 最终配置\r\nconst propsFinnal = computed(() => {\r\n  const globalOptionKeys = Object.keys(globalOption);\r\n\r\n  let result = {};\r\n  Object.keys(props).forEach((prop) => {\r\n    result[prop] =\r\n      globalOptionKeys.indexOf(prop) === -1 ? props[prop] : globalOption[prop];\r\n  });\r\n  return result;\r\n});\r\n// 上传组件ref\r\nconst myupload = ref(null);\r\n\r\nconst getExtByType = (type) => {\r\n  const quickType = Object.assign(\r\n    {},\r\n    FileTypeMap,\r\n    globalOption.quickType || {}\r\n  );\r\n  if (type && Array.isArray(quickType[type])) {\r\n    let classList = [];\r\n    let extList = [];\r\n    quickType[type].forEach((e) => {\r\n      if (e.indexOf("t-") === 0) {\r\n        classList.push(e);\r\n      } else {\r\n        extList.push(e);\r\n      }\r\n    });\r\n    if (classList.length) {\r\n      classList.forEach((classType) => {\r\n        extList = extList.concat(getExtByType(classType));\r\n      });\r\n    }\r\n    return extList;\r\n  } else if (type && type.split) {\r\n    return [type.toLowerCase()];\r\n  }\r\n};\r\n\r\nconst acceptFinnal = computed(() => {\r\n  if (props.accept && props.accept.indexOf("t-") !== -1) {\r\n    const typeArray = props.accept.split(",");\r\n    let result = [];\r\n    typeArray.forEach((type) => {\r\n      result = result.concat(getExtByType(type));\r\n    });\r\n    return result.join(",");\r\n  } else {\r\n    return props.accept || "*";\r\n  }\r\n});\r\n// attrs\r\nconst attrs = useAttrs();\r\nconst fileListFinnal = computed(\r\n  () => {\r\n    return attrs.fileList || props.modelValue || [];\r\n  },\r\n  {\r\n    immediate: true,\r\n  }\r\n);\r\n// 组件变量\r\nlet dialogVisible = ref(false);\r\nlet cropResult = ref(null);\r\nlet controller = ref(null);\r\n\r\n// 方法\r\nconst handleBeforeUpload = function (file) {\r\n  // 尺寸校验\r\n  if (file.size > propsFinnal.value.limitSize) {\r\n    propsFinnal.value.BeforeUploadError({\r\n      message: "文件大小超出限制",\r\n      type: "warning",\r\n    });\r\n    return false;\r\n  }\r\n  // 格式校验\r\n  if (\r\n    acceptFinnal.value !== "*" &&\r\n    acceptFinnal.value.indexOf(\r\n      file.name.substring(file.name.lastIndexOf(".")).toLowerCase()\r\n    ) === -1\r\n  ) {\r\n    console.log(file.name.substring(file.name.lastIndexOf(".")).toLowerCase());\r\n    propsFinnal.value.BeforeUploadError({\r\n      message: "文件格式不正确",\r\n      type: "warning",\r\n    });\r\n    return false;\r\n  }\r\n\r\n  if (typeof attrs["before-upload"] === "function") {\r\n    return attrs["before-upload"](file);\r\n  } else if (globalOption && typeof globalOption.beforeUpload === "function") {\r\n    return globalOption.beforeUpload(file);\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\nconst handleonExceed = function (file, fileList) {\r\n  if (typeof attrs["on-exceed"] === "function") {\r\n    attrs["on-exceed"](file, fileList);\r\n  } else if (globalOption && typeof globalOption.onExceed === "function") {\r\n    globalOption.onExceed(file, fileList);\r\n  }\r\n};\r\n\r\nconst handleChange = function (file, fileList) {\r\n  const doneFiles = fileList.filter((e) => e.status === "success");\r\n  if (doneFiles.length === fileList.length) {\r\n    emits(\r\n      "update:modelValue",\r\n      doneFiles.map((e) => {\r\n        let data = e.response\r\n          ? propsFinnal.value.responseTransfer(e.response)\r\n          : e;\r\n        // 扩展字段\r\n        data.uid = e.uid;\r\n        data.status = e.status;\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  if (typeof attrs["on-change"] === "function") {\r\n    attrs["on-change"](file, fileList);\r\n  }\r\n};\r\nconst handleProgress = function (e) {\r\n  if (typeof attrs["on-progress"] === "function") {\r\n    if (e.total > 0) {\r\n      e.percent = (e.loaded / e.total) * 100;\r\n    }\r\n    attrs["on-progress"](e);\r\n  }\r\n};\r\nconst handleRemove = function (file, fileList) {\r\n  emits(\r\n    "update:modelValue",\r\n    fileList.map((e) => {\r\n      let data = e.response\r\n        ? propsFinnal.value.responseTransfer(e.response)\r\n        : e;\r\n      data.uid = e.uid;\r\n      return data;\r\n    })\r\n  );\r\n\r\n  if (typeof attrs["on-remove"] === "function") {\r\n    attrs["on-remove"](file, fileList);\r\n  }\r\n};\r\n\r\nconst cropperMethod = function (action) {\r\n  // 剪裁相关处理方法\r\n  switch (action) {\r\n    case "save":\r\n      cropperInstance\r\n        .getCroppedCanvas({\r\n          minWidth: propsFinnal.value.imgCropOption.minWidth,\r\n          minHeight: propsFinnal.value.imgCropOption.minHeight,\r\n          maxWidth: propsFinnal.value.imgCropOption.maxWidth || 1000,\r\n          maxHeight: propsFinnal.value.imgCropOption.maxHeight || 1000,\r\n          imageSmoothingQuality: "medium",\r\n        })\r\n        .toBlob((blob) => {\r\n          cropResult.value = blob;\r\n        }, "image/jpeg");\r\n      break;\r\n    case "close":\r\n      dialogVisible.value = false;\r\n      if (cropperInstance) {\r\n        cropperInstance.destroy();\r\n      }\r\n      if (!cropResult.value) {\r\n        const newValue = [].concat(props.modelValue);\r\n        newValue.pop();\r\n        emits("update:modelValue", newValue);\r\n      }\r\n      break;\r\n    case "rotateLeft":\r\n      cropperInstance.rotate(-90);\r\n      break;\r\n    case "rotateRight":\r\n      cropperInstance.rotate(90);\r\n      break;\r\n    case "scaleX":\r\n      cropperInstance.scaleX(-1);\r\n      break;\r\n    case "scaleY":\r\n      cropperInstance.scaleY(-1);\r\n      break;\r\n    case "reset":\r\n      cropperInstance.reset();\r\n      break;\r\n    default:\r\n      console.warn("cropperMethod 参数错误: ", action);\r\n  }\r\n};\r\nconst clearFiles = function () {\r\n  // el-upload 方法\r\n  myupload.value.clearFiles();\r\n};\r\nconst abort = function () {\r\n  controller.value.abort();\r\n};\r\nconst submit = function () {\r\n  // el-upload 方法\r\n  myupload.value.submit();\r\n};\r\n// 剪裁图片DOM\r\nconst CropperImg = ref(null);\r\n// 自定义上传逻辑\r\nconst customUpload = async (params) => {\r\n  if (\r\n    !globalOption &&\r\n    !globalOption.uploadMethod &&\r\n    !propsFinnal.value.uploadMethod\r\n  ) {\r\n    return console.warn(\r\n      "Uploader: The required configuration [uploadMethod] is missing!"\r\n    );\r\n  }\r\n\r\n  const theUploadRequest =\r\n    propsFinnal.value.uploadMethod || globalOption.uploadMethod;\r\n  if (typeof theUploadRequest !== "function") {\r\n    return console.warn("Uploader: [uploadMethod] must be a Function!");\r\n  }\r\n\r\n  const uploadedFileType = params.file.type;\r\n  DEBUG && console.log("uploadedFileType", uploadedFileType);\r\n\r\n  let formDataFileObj = params.file;\r\n  let formDataFileName = params.file.name;\r\n\r\n  if (uploadedFileType.indexOf("image/") === 0) {\r\n    if (propsFinnal.value.imgCrop) {\r\n      // 图片剪裁\r\n      cropResult.value = null;\r\n      dialogVisible.value = true;\r\n\r\n      const imgBlob = await new Promise((resolve) => {\r\n        let oReader = new FileReader();\r\n        oReader.onload = (e) => {\r\n          let base64 = e.target.result;\r\n          let img = CropperImg.value;\r\n          img.src = base64;\r\n          //\r\n          if (cropperInstance) {\r\n            cropperInstance.destroy();\r\n          }\r\n\r\n          cropperInstance = new Cropper(img, {\r\n            viewMode: 1,\r\n            dragMode: "none",\r\n            movable: false,\r\n            zoomOnTouch: false,\r\n            zoomOnWheel: false,\r\n            toggleDragModeOnDblclick: false,\r\n            aspectRatio: propsFinnal.value.imgCropOption.ratio,\r\n          });\r\n        };\r\n        oReader.readAsDataURL(params.file);\r\n\r\n        watch(cropResult, resolve);\r\n      });\r\n\r\n      if (imgBlob) {\r\n        DEBUG && console.log("imgCrop", imgBlob);\r\n        formDataFileObj = imgBlob;\r\n        formDataFileName = fixJpgFileName(formDataFileName);\r\n        cropperMethod("close");\r\n      }\r\n    } else if (propsFinnal.value.imgCompress) {\r\n      // 图片压缩\r\n      const imgBlob = await fixImgFile(\r\n        params.file,\r\n        Object.assign({}, propsFinnal.value.imgCompressOption, {\r\n          outType: "blob",\r\n        })\r\n      );\r\n\r\n      DEBUG && console.log("imgCompress", imgBlob);\r\n      formDataFileObj = imgBlob;\r\n      formDataFileName = fixJpgFileName(formDataFileName);\r\n    }\r\n  }\r\n\r\n  // 上传\r\n  DEBUG && console.log("upload params", formDataFileName, formDataFileObj);\r\n  controller.value = new AbortController();\r\n  return theUploadRequest(formDataFileObj, formDataFileName, {\r\n    onUploadProgress: handleProgress,\r\n    signal: controller.value.signal,\r\n  }).then((res) => {\r\n    return res.data;\r\n  });\r\n};\r\n\r\n// onMounted(() => {\r\n//   console.warn(CropperImg.value);\r\n// });\r\n<\/script>\r\n\r\n<style>\r\n.uploader-cropper-dialog .el-dialog__body {\r\n  padding: 0;\r\n}\r\n</style>\r\n<style scoped>\r\n/* 图片剪裁弹窗 */\r\n\r\n.cropper_main {\r\n  height: 50vh;\r\n  min-height: 500px;\r\n}\r\n\r\n.cropper_actions {\r\n  padding: 0.5em;\r\n}\r\n\r\n.cropper_actions :deep(.el-button-group) {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const l=s},456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(478),o=n.n(r),i=n(185),a=n.n(i),s=n(640),l=n.n(s),p=new URL(n(738),n.b),c=a()(o()),h=l()(p);c.push([e.id,'/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url('+h+")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}","",{version:3,sources:["webpack://./node_modules/.pnpm/cropperjs@1.5.12/node_modules/cropperjs/dist/cropper.css"],names:[],mappings:"AAAA;;;;;;;;EAQE,CAEF,mBACE,aAAc,CACd,WAAY,CACZ,aAAc,CACd,iBAAkB,CAClB,qBAAsB,CACtB,iBAAkB,CAClB,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBACF,CAEA,uBACE,aAAc,CACd,WAAY,CACZ,sBAAuB,CACvB,yBAA2B,CAC3B,wBAA0B,CAC1B,sBAAwB,CACxB,qBAAuB,CACvB,UACF,CAEA,qFAKE,QAAS,CACT,MAAO,CACP,iBAAkB,CAClB,OAAQ,CACR,KACF,CAEA,kCAEE,eACF,CAEA,kBACE,qBAAsB,CACtB,SACF,CAEA,eACE,qBAAsB,CACtB,UACF,CAEA,kBACE,aAAc,CACd,WAAY,CACZ,sBAAuB,CACvB,kCAAuC,CACvC,eAAgB,CAChB,UACF,CAEA,gBACE,oBAAqB,CACrB,aAAc,CACd,UAAY,CACZ,iBACF,CAEA,yBACE,uBAAwB,CACxB,oBAAqB,CACrB,gBAAsB,CACtB,MAAO,CACP,aAAmB,CACnB,UACF,CAEA,yBACE,qBAAsB,CACtB,sBAAuB,CACvB,WAAY,CACZ,cAAoB,CACpB,KAAM,CACN,eACF,CAEA,gBACE,aAAc,CACd,QAAS,CACT,QAAS,CACT,WAAa,CACb,iBAAkB,CAClB,OAAQ,CACR,OACF,CAEA,6CAEE,qBAAsB,CACtB,WAAY,CACZ,aAAc,CACd,iBACF,CAEA,uBACE,UAAW,CACX,SAAU,CACV,KAAM,CACN,SACF,CAEA,sBACE,UAAW,CACX,MAAO,CACP,QAAS,CACT,SACF,CAEA,2CAGE,aAAc,CACd,WAAY,CACZ,UAAY,CACZ,iBAAkB,CAClB,UACF,CAEA,cACE,qBAAsB,CACtB,MAAO,CACP,KACF,CAEA,cACE,qBACF,CAEA,qBACE,gBAAiB,CACjB,UAAW,CACX,KAAM,CACN,SACF,CAEA,qBACE,gBAAiB,CACjB,UAAW,CACX,MAAO,CACP,QACF,CAEA,qBACE,gBAAiB,CACjB,SAAU,CACV,KAAM,CACN,SACF,CAEA,qBACE,WAAY,CACZ,gBAAiB,CACjB,UAAW,CACX,MACF,CAEA,eACE,qBAAsB,CACtB,UAAW,CACX,WAAa,CACb,SACF,CAEA,uBACE,gBAAiB,CACjB,eAAgB,CAChB,UAAW,CACX,OACF,CAEA,uBACE,gBAAiB,CACjB,QAAS,CACT,gBAAiB,CACjB,QACF,CAEA,uBACE,gBAAiB,CACjB,SAAU,CACV,eAAgB,CAChB,OACF,CAEA,uBACE,WAAY,CACZ,eAAgB,CAChB,QAAS,CACT,gBACF,CAEA,wBACE,kBAAmB,CACnB,UAAW,CACX,QACF,CAEA,wBACE,kBAAmB,CACnB,SAAU,CACV,QACF,CAEA,wBACE,WAAY,CACZ,kBAAmB,CACnB,SACF,CAEA,wBACE,WAAY,CACZ,kBAAmB,CACnB,WAAY,CACZ,SAAU,CACV,UAAW,CACX,UACF,CAEA,yBACE,wBACE,WAAY,CACZ,UACF,CACF,CAEA,yBACE,wBACE,WAAY,CACZ,UACF,CACF,CAEA,0BACE,wBACE,UAAW,CACX,WAAa,CACb,SACF,CACF,CAEA,+BACE,qBAAsB,CACtB,WAAY,CACZ,WAAY,CACZ,aAAc,CACd,WAAY,CACZ,SAAU,CACV,iBAAkB,CAClB,UAAW,CACX,UACF,CAEA,mBACE,SACF,CAEA,YACE,wDACF,CAEA,cACE,aAAc,CACd,QAAS,CACT,iBAAkB,CAClB,OACF,CAEA,gBACE,sBACF,CAEA,cACE,WACF,CAEA,cACE,gBACF,CAEA,qIAIE,kBACF",sourcesContent:["/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */\n\n.cropper-container {\n  direction: ltr;\n  font-size: 0;\n  line-height: 0;\n  position: relative;\n  -ms-touch-action: none;\n  touch-action: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.cropper-container img {\n  display: block;\n  height: 100%;\n  image-orientation: 0deg;\n  max-height: none !important;\n  max-width: none !important;\n  min-height: 0 !important;\n  min-width: 0 !important;\n  width: 100%;\n}\n\n.cropper-wrap-box,\n.cropper-canvas,\n.cropper-drag-box,\n.cropper-crop-box,\n.cropper-modal {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.cropper-wrap-box,\n.cropper-canvas {\n  overflow: hidden;\n}\n\n.cropper-drag-box {\n  background-color: #fff;\n  opacity: 0;\n}\n\n.cropper-modal {\n  background-color: #000;\n  opacity: 0.5;\n}\n\n.cropper-view-box {\n  display: block;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  overflow: hidden;\n  width: 100%;\n}\n\n.cropper-dashed {\n  border: 0 dashed #eee;\n  display: block;\n  opacity: 0.5;\n  position: absolute;\n}\n\n.cropper-dashed.dashed-h {\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  height: calc(100% / 3);\n  left: 0;\n  top: calc(100% / 3);\n  width: 100%;\n}\n\n.cropper-dashed.dashed-v {\n  border-left-width: 1px;\n  border-right-width: 1px;\n  height: 100%;\n  left: calc(100% / 3);\n  top: 0;\n  width: calc(100% / 3);\n}\n\n.cropper-center {\n  display: block;\n  height: 0;\n  left: 50%;\n  opacity: 0.75;\n  position: absolute;\n  top: 50%;\n  width: 0;\n}\n\n.cropper-center::before,\n.cropper-center::after {\n  background-color: #eee;\n  content: ' ';\n  display: block;\n  position: absolute;\n}\n\n.cropper-center::before {\n  height: 1px;\n  left: -3px;\n  top: 0;\n  width: 7px;\n}\n\n.cropper-center::after {\n  height: 7px;\n  left: 0;\n  top: -3px;\n  width: 1px;\n}\n\n.cropper-face,\n.cropper-line,\n.cropper-point {\n  display: block;\n  height: 100%;\n  opacity: 0.1;\n  position: absolute;\n  width: 100%;\n}\n\n.cropper-face {\n  background-color: #fff;\n  left: 0;\n  top: 0;\n}\n\n.cropper-line {\n  background-color: #39f;\n}\n\n.cropper-line.line-e {\n  cursor: ew-resize;\n  right: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-n {\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n  top: -3px;\n}\n\n.cropper-line.line-w {\n  cursor: ew-resize;\n  left: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-s {\n  bottom: -3px;\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n}\n\n.cropper-point {\n  background-color: #39f;\n  height: 5px;\n  opacity: 0.75;\n  width: 5px;\n}\n\n.cropper-point.point-e {\n  cursor: ew-resize;\n  margin-top: -3px;\n  right: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-n {\n  cursor: ns-resize;\n  left: 50%;\n  margin-left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-w {\n  cursor: ew-resize;\n  left: -3px;\n  margin-top: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-s {\n  bottom: -3px;\n  cursor: s-resize;\n  left: 50%;\n  margin-left: -3px;\n}\n\n.cropper-point.point-ne {\n  cursor: nesw-resize;\n  right: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-nw {\n  cursor: nwse-resize;\n  left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-sw {\n  bottom: -3px;\n  cursor: nesw-resize;\n  left: -3px;\n}\n\n.cropper-point.point-se {\n  bottom: -3px;\n  cursor: nwse-resize;\n  height: 20px;\n  opacity: 1;\n  right: -3px;\n  width: 20px;\n}\n\n@media (min-width: 768px) {\n  .cropper-point.point-se {\n    height: 15px;\n    width: 15px;\n  }\n}\n\n@media (min-width: 992px) {\n  .cropper-point.point-se {\n    height: 10px;\n    width: 10px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .cropper-point.point-se {\n    height: 5px;\n    opacity: 0.75;\n    width: 5px;\n  }\n}\n\n.cropper-point.point-se::before {\n  background-color: #39f;\n  bottom: -50%;\n  content: ' ';\n  display: block;\n  height: 200%;\n  opacity: 0;\n  position: absolute;\n  right: -50%;\n  width: 200%;\n}\n\n.cropper-invisible {\n  opacity: 0;\n}\n\n.cropper-bg {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n}\n\n.cropper-hide {\n  display: block;\n  height: 0;\n  position: absolute;\n  width: 0;\n}\n\n.cropper-hidden {\n  display: none !important;\n}\n\n.cropper-move {\n  cursor: move;\n}\n\n.cropper-crop {\n  cursor: crosshair;\n}\n\n.cropper-disabled .cropper-drag-box,\n.cropper-disabled .cropper-face,\n.cropper-disabled .cropper-line,\n.cropper-disabled .cropper-point {\n  cursor: not-allowed;\n}\n"],sourceRoot:""}]);const d=c},185:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r="undefined"!==typeof t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"===typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var p=0;p<e.length;p++){var c=[].concat(e[p]);r&&a[c[0]]||("undefined"!==typeof i&&("undefined"===typeof c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},640:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},478:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"===typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([i]).join("\n")}return[t].join("\n")}},562:function(e,t){var r,o;(function(){var i=!1,a=function(e){return e instanceof a?e:this instanceof a?void(this.EXIFwrapped=e):new a(e)};e.exports&&(t=e.exports=a),t.EXIF=a;var s=a.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},l=a.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},p=a.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=a.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},h=a.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function d(e){return!!e.exifdata}function u(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;a<r;a++)i[a]=n.charCodeAt(a);return o}function f(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}function m(e,t){function n(n){var r=g(n);e.exifdata=r||{};var o=A(n);if(e.iptcdata=o||{},a.isXmpEnabled){var i=E(n);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var r=u(e.src);n(r)}else if(/^blob\:/i.test(e.src)){var o=new FileReader;o.onload=function(e){n(e.target.result)},f(e.src,(function(e){o.readAsArrayBuffer(e)}))}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(s.response),s=null},s.open("GET",e.src,!0),s.responseType="arraybuffer",s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){o=new FileReader;o.onload=function(e){i&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},o.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var n,r=2,o=e.byteLength;while(r<o){if(255!=t.getUint8(r))return i&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),i&&console.log(n),225==n)return i&&console.log("Found 0xFFE1 marker"),M(t,r+4,t.getUint16(r+2)-2);r+=2+t.getUint16(r+2)}}function A(e){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(n<r){if(o(t,n)){var a=t.getUint8(n+7);a%2!==0&&(a+=1),0===a&&(a=4);var s=n+8+a,l=t.getUint16(n+6+a);return C(e,s,l)}n++}}var v={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function C(e,t,n){var r,o,i,a,s=new DataView(e),l={},p=t;while(p<t+n)28===s.getUint8(p)&&2===s.getUint8(p+1)&&(a=s.getUint8(p+2),a in v&&(i=s.getInt16(p+3),i+5,o=v[a],r=B(s,p+5,i),l.hasOwnProperty(o)?l[o]instanceof Array?l[o].push(r):l[o]=[l[o],r]:l[o]=r)),p++;return l}function b(e,t,n,r,o){var a,s,l,p=e.getUint16(n,!o),c={};for(l=0;l<p;l++)a=n+12*l+2,s=r[e.getUint16(a,!o)],!s&&i&&console.log("Unknown tag: "+e.getUint16(a,!o)),c[s]=w(e,a,t,n,o);return c}function w(e,t,n,r,o){var i,a,s,l,p,c,h=e.getUint16(t+2,!o),d=e.getUint32(t+4,!o),u=e.getUint32(t+8,!o)+n;switch(h){case 1:case 7:if(1==d)return e.getUint8(t+8,!o);for(i=d>4?u:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint8(i+l);return a;case 2:return i=d>4?u:t+8,B(e,i,d-1);case 3:if(1==d)return e.getUint16(t+8,!o);for(i=d>2?u:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint16(i+2*l,!o);return a;case 4:if(1==d)return e.getUint32(t+8,!o);for(a=[],l=0;l<d;l++)a[l]=e.getUint32(u+4*l,!o);return a;case 5:if(1==d)return p=e.getUint32(u,!o),c=e.getUint32(u+4,!o),s=new Number(p/c),s.numerator=p,s.denominator=c,s;for(a=[],l=0;l<d;l++)p=e.getUint32(u+8*l,!o),c=e.getUint32(u+4+8*l,!o),a[l]=new Number(p/c),a[l].numerator=p,a[l].denominator=c;return a;case 9:if(1==d)return e.getInt32(t+8,!o);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(u+4*l,!o);return a;case 10:if(1==d)return e.getInt32(u,!o)/e.getInt32(u+4,!o);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(u+8*l,!o)/e.getInt32(u+4+8*l,!o);return a}}function y(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}function x(e,t,n,r){var o=y(e,t+n,r);if(!o)return{};if(o>e.byteLength)return{};var i=b(e,t,t+o,c,r);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var a=t+i.JpegIFOffset,s=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function B(e,t,r){var o="";for(n=t;n<t+r;n++)o+=String.fromCharCode(e.getUint8(n));return o}function M(e,t){if("Exif"!=B(e,t,4))return i&&console.log("Not valid EXIF data! "+B(e,t,4)),!1;var n,r,o,a,c,d=t+6;if(18761==e.getUint16(d))n=!1;else{if(19789!=e.getUint16(d))return i&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(d+2,!n))return i&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(d+4,!n);if(u<8)return i&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!n)),!1;if(r=b(e,d,d+u,l,n),r.ExifIFDPointer)for(o in a=b(e,d,d+r.ExifIFDPointer,s,n),a){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[o]=h[o][a[o]];break;case"ExifVersion":case"FlashpixVersion":a[o]=String.fromCharCode(a[o][0],a[o][1],a[o][2],a[o][3]);break;case"ComponentsConfiguration":a[o]=h.Components[a[o][0]]+h.Components[a[o][1]]+h.Components[a[o][2]]+h.Components[a[o][3]];break}r[o]=a[o]}if(r.GPSInfoIFDPointer)for(o in c=b(e,d,d+r.GPSInfoIFDPointer,p,n),c){switch(o){case"GPSVersionID":c[o]=c[o][0]+"."+c[o][1]+"."+c[o][2]+"."+c[o][3];break}r[o]=c[o]}return r["thumbnail"]=x(e,d,u,n),r}function E(e){if("DOMParser"in self){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,o=new DOMParser;while(n<r-4){if("http"==B(t,n,4)){var a=n-1,s=t.getUint16(n-2)-1,l=B(t,a,s),p=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),p);var c=l.indexOf("x:xmpmeta")+10;l=l.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(c);var h=o.parseFromString(l,"text/xml");return O(h)}n++}}}function F(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var i=e.childNodes.item(o),a=i.nodeName;if(null==t[a])t[a]=F(i);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(F(i))}}return t}function O(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),o=r.attributes;for(var i in o){var a=o[i],s=a.nodeName,l=a.nodeValue;void 0!==s&&(t[s]=l)}var p=r.nodeName;if("undefined"==typeof t[p])t[p]=F(r);else{if("undefined"==typeof t[p].push){var c=t[p];t[p]=[],t[p].push(c)}t[p].push(F(r))}}else t=e.textContent;return t}catch(h){console.log(h.message)}}a.enableXmp=function(){a.isXmpEnabled=!0},a.disableXmp=function(){a.isXmpEnabled=!1},a.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(d(e)?t&&t.call(e):m(e,t),!0)},a.getTag=function(e,t){if(d(e))return e.exifdata[t]},a.getIptcTag=function(e,t){if(d(e))return e.iptcdata[t]},a.getAllTags=function(e){if(!d(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},a.getAllIptcTags=function(e){if(!d(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},a.pretty=function(e){if(!d(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},a.readFromBinaryFile=function(e){return g(e)},r=[],o=function(){return a}.apply(t,r),void 0===o||(e.exports=o)}).call(this)},935:(e,t)=>{"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},121:(e,t,n)=>{var r=n(383);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=n(959).Z;o("25e4f120",r,!0,{sourceMap:!0,shadowMode:!1})},380:(e,t,n)=>{var r=n(195);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=n(959).Z;o("685afc74",r,!0,{sourceMap:!0,shadowMode:!1})},527:(e,t,n)=>{var r=n(456);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=n(959).Z;o("6b899d9f",r,!0,{sourceMap:!0,shadowMode:!1})},959:(e,t,n)=>{"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=i[0],s=i[1],l=i[2],p=i[3],c={id:e+":"+o,css:s,media:l,sourceMap:p};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}n.d(t,{Z:()=>f});var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,p=!1,c=function(){},h=null,d="data-vue-ssr-id",u="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,o){p=n,h=o||{};var a=r(e,t);return m(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o],l=i[s.id];l.refs--,n.push(l)}t?(a=r(e,t),m(a)):a=[];for(o=0;o<n.length;o++){l=n[o];if(0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete i[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(A(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(A(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function A(e){var t,n,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(p)return c;r.parentNode.removeChild(r)}if(u){var o=l++;r=s||(s=g()),t=C.bind(null,r,o,!1),n=C.bind(null,r,o,!0)}else r=g(),t=b.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function C(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function b(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),h.ssrId&&e.setAttribute(d,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},738:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},203:t=>{"use strict";t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={id:e,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}o.m=t,(()=>{o.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return o.d(t,{a:t}),t}})(),(()=>{o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{o.p=""})(),(()=>{o.b=document.baseURI||self.location.href})();var i={};return(()=>{"use strict";if(o.d(i,{default:()=>ae}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(o.p=t[1])}var n=o(203),r=o(562);const a=function(e){return new Promise((t=>{(0,r.getData)(e,(function(){let e=(0,r.getTag)(this,"Orientation");t(e)}))}))},s=function(e,t){const n=document.createElement("canvas"),r=n.getContext("2d"),o=e.targetWidth||e.width,i=e.targetHeight||e.height;return 6===t?(n.width=i,n.height=o,r.translate(n.width/2,n.height/2),r.rotate(Math.PI/180*90),r.drawImage(e,-o/2,-i/2,n.height,n.width)):(n.width=o,n.height=i,r.drawImage(e,0,0,n.width,n.height)),new Promise((e=>{e(n)}))},l=function(e,t,n,r){let o=e,i=t;const a=function(){o=n,i=Math.round(n*(t/e))},s=function(){i=r,o=Math.round(r*(e/t))};return n&&r?(e>n||t>r)&&(e/t>n/r?a():s()):n?a():r&&s(),{width:o,height:i}},p=function(e,t){const n=Object.assign({maxWidth:null,maxHeight:null,ratio:2,outType:"base64"},t||{});return new Promise(((t,r)=>{0===e.type.indexOf("image/")?a(e).then((r=>{let o=new FileReader;o.onload=function(e){let o=e.target.result,i=document.createElement("img");i.onload=function(){if(n.maxWidth||n.maxHeight){let e;6===r?(e=l(i.height,i.width,n.maxWidth,n.maxHeight),i.targetWidth=e.height,i.targetHeight=e.width):(e=l(i.width,i.height,n.maxWidth,n.maxHeight),i.targetWidth=e.width,i.targetHeight=e.height)}s(i,r).then((e=>{"blob"===n.outType?e.toBlob(t,"image/jpeg",n.ratio):t(e.toDataURL("image/jpeg",n.ratio))}))},i.src=o},o.readAsDataURL(e)})).catch((e=>{r(e)})):r("非图片文件不支持压缩")}))};var c=o(417),h=o.n(c),d=(o(527),(e,t)=>{let n=e.__vccOpts||e;for(let[r,o]of t)n[r]=o;return n});var u={name:"Crop"},f={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},m=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M256 768h672a32 32 0 1 1 0 64H224a32 32 0 0 1-32-32V96a32 32 0 0 1 64 0v672z"},null,-1),g=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M832 224v704a32 32 0 1 1-64 0V256H96a32 32 0 0 1 0-64h704a32 32 0 0 1 32 32z"},null,-1),A=[m,g];function v(e,t,r,o,i,a){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",f,A)}var C=d(u,[["render",v],["__file","crop.vue"]]);var b={name:"RefreshLeft"},w={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},y=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),x=[y];function B(e,t,r,o,i,a){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",w,x)}var M=d(b,[["render",B],["__file","refresh-left.vue"]]),E={name:"RefreshRight"},F={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},O=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),D=[O];function k(e,t,r,o,i,a){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",F,D)}var S=d(E,[["render",k],["__file","refresh-right.vue"]]),T={name:"Refresh"},U={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},N=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),R=[N];function L(e,t,r,o,i,a){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",U,R)}var I=d(T,[["render",L],["__file","refresh.vue"]]);var P={name:"Sort"},W={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},j=(0,n.createElementVNode)("path",{fill:"currentColor",d:"M384 96a32 32 0 0 1 64 0v786.752a32 32 0 0 1-54.592 22.656L95.936 608a32 32 0 0 1 0-45.312h.128a32 32 0 0 1 45.184 0L384 805.632V96zm192 45.248a32 32 0 0 1 54.592-22.592L928.064 416a32 32 0 0 1 0 45.312h-.128a32 32 0 0 1-45.184 0L640 218.496V928a32 32 0 1 1-64 0V141.248z"},null,-1),V=[j];function H(e,t,r,o,i,a){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",W,V)}var z=d(P,[["render",H],["__file","sort.vue"]]);const q={"t-image":[".jpg",".jpeg",".png",".gif",".bmp",".webp"],"t-video":[".mp4",".rmvb",".avi",".mov",".3gp",".webm"],"t-audio":[".wav",".mp3",".ogg",".acc"],"t-word":[".docx",".doc"],"t-excel":[".xlsx",".xls"],"t-ppt":[".ppt",".pptx"],"t-document":[".pdf","t-word","t-excel","t-ppt"],"t-zip":[".zip",".rar"]},X=(0,n.createTextVNode)("点击上传"),Y={class:"cropper_main"},G={class:"cropper_actions flex-row align-center"},_={class:"flex-1"},Z=(0,n.createTextVNode)(" 左旋 "),Q=(0,n.createTextVNode)(" 右旋 "),J=(0,n.createTextVNode)(" 水平镜像 "),K=(0,n.createTextVNode)(" 垂直镜像 "),$=(0,n.createTextVNode)(" 重置 "),ee=(0,n.createTextVNode)(" 确定 "),te={__name:"uploader",props:{accept:{type:String,default:"*"},modelValue:{type:Array,required:!1,default(){return[]}},limitSize:{type:Number,required:!1,default(){return 104857600}},imgCompress:{type:Boolean,required:!1,default(){return!0}},imgCompressOption:{type:Object,required:!1,default(){return{maxWidth:1e3,maxHeight:1e3}}},imgCrop:{type:Boolean,required:!1,default(){return!1}},imgCropOption:{type:Object,required:!1,default(){return{ratio:1,minWidth:0,minHeight:0,maxWidth:1e3,maxHeight:1e3}}},uploadMethod:{type:Function,required:!1},responseTransfer:{type:Function,required:!1,default(e){return e}},BeforeUploadError:{type:Function,required:!1,default(e){return console.warn(e)}}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e;let o;const i=!1,a=function(e){return e.match(/\.jpg|\.jpeg$/)?e:e+".jpg"},s=(0,n.inject)("$UploaderOption"),l=(0,n.computed)((()=>{const e=Object.keys(s);let t={};return Object.keys(r).forEach((n=>{t[n]=-1===e.indexOf(n)?r[n]:s[n]})),t})),c=(0,n.ref)(null),d=e=>{const t=Object.assign({},q,s.quickType||{});if(e&&Array.isArray(t[e])){let n=[],r=[];return t[e].forEach((e=>{0===e.indexOf("t-")?n.push(e):r.push(e)})),n.length&&n.forEach((e=>{r=r.concat(d(e))})),r}if(e&&e.split)return[e.toLowerCase()]},u=(0,n.computed)((()=>{if(r.accept&&-1!==r.accept.indexOf("t-")){const e=r.accept.split(",");let t=[];return e.forEach((e=>{t=t.concat(d(e))})),t.join(",")}return r.accept||"*"})),f=(0,n.useAttrs)(),m=(0,n.computed)((()=>f.fileList||r.modelValue||[]),{immediate:!0});let g=(0,n.ref)(!1),A=(0,n.ref)(null),v=(0,n.ref)(null);const b=function(e){return e.size>l.value.limitSize?(l.value.BeforeUploadError({message:"文件大小超出限制",type:"warning"}),!1):"*"!==u.value&&-1===u.value.indexOf(e.name.substring(e.name.lastIndexOf(".")).toLowerCase())?(console.log(e.name.substring(e.name.lastIndexOf(".")).toLowerCase()),l.value.BeforeUploadError({message:"文件格式不正确",type:"warning"}),!1):"function"===typeof f["before-upload"]?f["before-upload"](e):!s||"function"!==typeof s.beforeUpload||s.beforeUpload(e)},w=function(e,t){"function"===typeof f["on-exceed"]?f["on-exceed"](e,t):s&&"function"===typeof s.onExceed&&s.onExceed(e,t)},y=function(e,n){const r=n.filter((e=>"success"===e.status));r.length===n.length&&t("update:modelValue",r.map((e=>{let t=e.response?l.value.responseTransfer(e.response):e;return t.uid=e.uid,t.status=e.status,t}))),"function"===typeof f["on-change"]&&f["on-change"](e,n)},x=function(e){"function"===typeof f["on-progress"]&&(e.total>0&&(e.percent=e.loaded/e.total*100),f["on-progress"](e))},B=function(e,n){t("update:modelValue",n.map((e=>{let t=e.response?l.value.responseTransfer(e.response):e;return t.uid=e.uid,t}))),"function"===typeof f["on-remove"]&&f["on-remove"](e,n)},E=function(e){switch(e){case"save":o.getCroppedCanvas({minWidth:l.value.imgCropOption.minWidth,minHeight:l.value.imgCropOption.minHeight,maxWidth:l.value.imgCropOption.maxWidth||1e3,maxHeight:l.value.imgCropOption.maxHeight||1e3,imageSmoothingQuality:"medium"}).toBlob((e=>{A.value=e}),"image/jpeg");break;case"close":if(g.value=!1,o&&o.destroy(),!A.value){const e=[].concat(r.modelValue);e.pop(),t("update:modelValue",e)}break;case"rotateLeft":o.rotate(-90);break;case"rotateRight":o.rotate(90);break;case"scaleX":o.scaleX(-1);break;case"scaleY":o.scaleY(-1);break;case"reset":o.reset();break;default:console.warn("cropperMethod 参数错误: ",e)}},F=(0,n.ref)(null),O=async e=>{if(!s&&!s.uploadMethod&&!l.value.uploadMethod)return console.warn("Uploader: The required configuration [uploadMethod] is missing!");const t=l.value.uploadMethod||s.uploadMethod;if("function"!==typeof t)return console.warn("Uploader: [uploadMethod] must be a Function!");const r=e.file.type;i&&console.log("uploadedFileType",r);let c=e.file,d=e.file.name;if(0===r.indexOf("image/"))if(l.value.imgCrop){A.value=null,g.value=!0;const t=await new Promise((t=>{let r=new FileReader;r.onload=e=>{let t=e.target.result,n=F.value;n.src=t,o&&o.destroy(),o=new(h())(n,{viewMode:1,dragMode:"none",movable:!1,zoomOnTouch:!1,zoomOnWheel:!1,toggleDragModeOnDblclick:!1,aspectRatio:l.value.imgCropOption.ratio})},r.readAsDataURL(e.file),(0,n.watch)(A,t)}));t&&(i&&console.log("imgCrop",t),c=t,d=a(d),E("close"))}else if(l.value.imgCompress){const t=await p(e.file,Object.assign({},l.value.imgCompressOption,{outType:"blob"}));i&&console.log("imgCompress",t),c=t,d=a(d)}return i&&console.log("upload params",d,c),v.value=new AbortController,t(c,d,{onUploadProgress:x,signal:v.value.signal}).then((e=>e.data))};return(e,t)=>{const r=(0,n.resolveComponent)("el-button"),o=(0,n.resolveComponent)("el-icon"),i=(0,n.resolveComponent)("el-button-group"),a=(0,n.resolveComponent)("el-dialog"),s=(0,n.resolveComponent)("el-upload");return(0,n.openBlock)(),(0,n.createBlock)(s,(0,n.mergeProps)({ref_key:"myupload",ref:c},e.$attrs,{action:"",fileList:(0,n.unref)(m),accept:(0,n.unref)(u),"before-upload":b,"on-exceed":w,"on-change":y,"on-remove":B,"http-request":O}),{tip:(0,n.withCtx)((()=>[(0,n.renderSlot)(e.$slots,"tip")])),default:(0,n.withCtx)((()=>[(0,n.renderSlot)(e.$slots,"default",{},(()=>[(0,n.createVNode)(r,null,{default:(0,n.withCtx)((()=>[X])),_:1})])),(0,n.createVNode)(a,{modelValue:(0,n.unref)(g),"onUpdate:modelValue":t[6]||(t[6]=e=>(0,n.isRef)(g)?g.value=e:g=e),"append-to-body":"",title:"图像剪裁",top:"10vh","custom-class":"uploader-cropper-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,onClose:t[7]||(t[7]=e=>E("close"))},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Y,[(0,n.createElementVNode)("img",{src:"",ref_key:"CropperImg",ref:F},null,512)]),(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",_,[(0,n.createVNode)(i,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{title:"左旋",onClick:t[0]||(t[0]=e=>E("rotateLeft"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(M))])),_:1}),Z])),_:1}),(0,n.createVNode)(r,{title:"右旋",onClick:t[1]||(t[1]=e=>E("rotateRight"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(S))])),_:1}),Q])),_:1})])),_:1}),(0,n.createVNode)(i,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{title:"水平镜像",onClick:t[2]||(t[2]=e=>E("scaleX"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{style:{transform:"rotateZ(90deg)"}},{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(z))])),_:1}),J])),_:1}),(0,n.createVNode)(r,{title:"垂直镜像",onClick:t[3]||(t[3]=e=>E("scaleY"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(z))])),_:1}),K])),_:1})])),_:1}),(0,n.createVNode)(i,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{title:"重置",onClick:t[4]||(t[4]=e=>E("reset"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(I))])),_:1}),$])),_:1})])),_:1})]),(0,n.createVNode)(r,{type:"primary",plain:"",onClick:t[5]||(t[5]=e=>E("save"))},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(C))])),_:1}),ee])),_:1})])])),_:1},8,["modelValue"])])),_:3},16,["fileList","accept"])}}};o(121),o(380);var ne=o(935);const re=(0,ne.Z)(te,[["__scopeId","data-v-74be6fb6"]]),oe=re,ie={install:function(e,t){e.config.compilerOptions.isCustomElement=e=>"uploader"===e,e.provide("$UploaderOption",t||{}),e.component("uploader",oe)}},ae=ie})(),i=i["default"],i})()));
//# sourceMappingURL=index.umd.min.js.map